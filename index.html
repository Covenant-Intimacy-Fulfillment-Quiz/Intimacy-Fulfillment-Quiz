<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Discover Your Top Intimacy Needs</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #fff9f2;
      color: #1a3c5e;
      padding: 20px;
      max-width: 800px;
      margin: auto;
    }
    h1, h2 {
      text-align: center;
      color: #ff4d4d;
    }
    .question {
      display: none;
    }
    .question.active {
      display: block;
    }
    .progress {
      text-align: center;
      margin: 20px 0;
      font-weight: bold;
    }
    label {
      display: block;
      margin: 10px 0;
      padding: 10px 15px;
      background-color: #f5f5f5;
      border-radius: 5px;
      cursor: pointer;
    }
    input[type="radio"] {
      margin-right: 10px;
    }
    button {
      background-color: #4d9de0;
      color: white;
      border: none;
      padding: 12px 24px;
      font-size: 16px;
      border-radius: 5px;
      cursor: pointer;
      display: block;
      margin: 20px auto;
    }
    #resultSection {
      display: none;
      margin-top: 30px;
    }
    canvas {
      display: block;
      margin: 30px auto;
      max-width: 100%;
    }
    .result-block, .description-block {
      background-color: #f0f4f9;
      border-left: 5px solid #4d9de0;
      padding: 15px;
      margin-bottom: 20px;
    }
    form#emailForm {
      margin-top: 30px;
      text-align: center;
    }
    form#emailForm input[type="email"] {
      padding: 10px;
      width: 80%;
      max-width: 300px;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <h1>What Are Your Top Intimacy Needs?</h1>
  <div class="progress" id="progressText">Question 1 of 24</div>

  <form id="quizForm">
    <div id="quiz"></div>
    <button type="button" id="nextButton">Next</button>
  </form>

  <div id="resultSection">
    <h2>Your Personalized Intimacy Profile</h2>
    <canvas id="resultsChart"></canvas>
    <div id="resultBreakdown"></div>
    <div id="descriptions"></div>

    <form id="emailForm" action="https://formspree.io/f/xgvzkwre" method="POST">
      <label>Want your results emailed to you?</label>
      <input type="email" name="email" placeholder="Enter your email" required>
      <input type="hidden" id="scoreSummary" name="message" value="">
      <button type="submit">Send Results</button>
    </form>

    <button onclick="downloadPDF()">Download PDF</button>
    <button onclick="location.reload()">Retake Quiz</button>
  </div>

  <script>
   const questions = [
  [
    "When you're feeling emotionally drained, what helps you feel most reconnected with your spouse?",
    "Having a spiritual conversation or praying together",
    "A warm, empathetic talk where you feel truly heard",
    "Doing something fun or silly together",
    "Being physically close or cuddling",
    "Spiritual", "Emotional", "Recreational", "Physical"
  ],
  [
    "What makes you feel most supported after a long day?",
    "Knowing your spouse is 100% committed and has your back",
    "Having your spouse help with dinner or chores",
    "Laughing together or watching a favorite show",
    "Discussing dreams and ideas for the future",
    "Commitment", "Partnership", "Affability", "Intellectual"
  ],
  [
    "What best helps you feel deeply loved?",
    "Intentional affection like hugs, kisses, or hand-holding",
    "Shared quiet time with your spouse and God",
    "Receiving a helpful act like making you coffee or folding laundry",
    "Playfully teasing or sharing inside jokes",
    "Physical", "Spiritual", "Service", "Affability"
  ],
  [
    "Which experience draws you closer to your spouse?",
    "Working on a budget or planning finances together",
    "Praying or reading scripture together",
    "Talking about hopes, fears, and deep emotions",
    "Planning a creative project together",
    "Financial", "Spiritual", "Emotional", "Creative"
  ],
  [
    "What makes you feel most secure in your relationship?",
    "Hearing your spouse reaffirm their lifelong commitment",
    "Consistent actions of support and kindness",
    "Having open conversations about money or future goals",
    "Being sexually pursued and desired",
    "Commitment", "Service", "Financial", "Sexual"
  ],
  [
    "What do you miss most when you're disconnected?",
    "Having intellectual conversation or brainstorming ideas",
    "Laughter, lightheartedness, and goofiness",
    "Gentle touch and closeness",
    "Spending time in prayer or worship together",
    "Intellectual", "Affability", "Physical", "Spiritual"
  ],
  [
    "How do you prefer to celebrate something exciting?",
    "Going on a date or enjoying shared physical intimacy",
    "Spending fun, adventurous time together",
    "Thanking God together and praying",
    "Sitting down and planning your next big goal",
    "Sexual", "Recreational", "Spiritual", "Intellectual"
  ],
  [
    "Which moment would mean the most?",
    "Your spouse listens deeply and affirms your feelings",
    "They plan an entire date night just for the two of you",
    "They join you in a heartfelt devotional or prayer",
    "They surprise you by handling a task you were dreading",
    "Emotional", "Recreational", "Spiritual", "Service"
  ],
  [
    "What do you wish your spouse understood better about you?",
    "You need emotional connection to feel close",
    "Spiritual unity makes your relationship stronger",
    "Finances and practical planning bring you peace",
    "You love creating or dreaming together",
    "Emotional", "Spiritual", "Financial", "Creative"
  ],
  [
    "Which action would fill your emotional tank?",
    "Spending uninterrupted time praying or reading the Bible together",
    "Being touched gently—shoulder squeeze, hand-hold, or a hug",
    "Having a no-stress, fun experience together",
    "Knowing your spouse is truly in it for the long haul",
    "Spiritual", "Physical", "Recreational", "Commitment"
  ],
  [
    "You're overwhelmed. What’s most comforting?",
    "Your spouse taking something off your plate without being asked",
    "A reassuring talk where your spouse really listens",
    "Holding hands or sitting close",
    "Being reminded of your shared faith and purpose",
    "Service", "Emotional", "Physical", "Spiritual"
  ],
  [
    "How do you know your spouse values you?",
    "They encourage your creativity and ideas",
    "They stay faithful to your shared values",
    "They speak kindly and keep a joyful tone",
    "They pursue physical and sexual closeness",
    "Creative", "Commitment", "Affability", "Sexual"
  ],
  [
    "You're planning a weekend together. What excites you most?",
    "Volunteering or serving together",
    "Doing something active, like hiking or going to a game",
    "Starting a creative or DIY project",
    "Relaxing and reading devotionals together",
    "Service", "Recreational", "Creative", "Spiritual"
  ],
  [
    "Which statement feels most true to you?",
    "Touch is how I feel closest to my spouse",
    "I feel safe when we’re emotionally vulnerable",
    "Playfulness helps me de-stress and connect",
    "I feel intimacy through spiritual connection",
    "Physical", "Emotional", "Affability", "Spiritual"
  ],
  [
    "How does your spouse best express love?",
    "Taking on responsibilities when I’m tired",
    "Talking with me about ideas or current events",
    "Keeping promises and honoring their word",
    "Being silly and laughing with me",
    "Service", "Intellectual", "Commitment", "Affability"
  ],
  [
    "What’s your favorite way to reconnect after conflict?",
    "Holding hands or cuddling",
    "Praying together and restoring spiritually",
    "Talking honestly and feeling emotionally safe",
    "Doing something spontaneous and fun",
    "Physical", "Spiritual", "Emotional", "Recreational"
  ],
  [
    "What intimacy feels hardest to live without?",
    "Sexual passion and desire",
    "Working together as a team",
    "Emotional empathy and affirmation",
    "Faith and prayer as a couple",
    "Sexual", "Partnership", "Emotional", "Spiritual"
  ],
  [
    "What makes you feel most prioritized?",
    "Being included in decisions and responsibilities",
    "Being pursued physically and sexually",
    "Having regular emotional check-ins",
    "Creating a shared spiritual routine",
    "Partnership", "Sexual", "Emotional", "Spiritual"
  ],
  [
    "What brings you the most peace in your marriage?",
    "Financial unity and shared planning",
    "Faithfulness and trustworthiness",
    "Having fun together often",
    "Creative collaboration or dreaming big",
    "Financial", "Commitment", "Recreational", "Creative"
  ],
  [
    "Your spouse surprises you. What would you love?",
    "Setting up a prayer or worship time together",
    "Taking over something you usually do",
    "Planning a fun day with no responsibilities",
    "Leaving an affectionate or romantic note",
    "Spiritual", "Service", "Recreational", "Affability"
  ],
  [
    "In a busy week, what do you long for?",
    "Someone to ask how I feel and really listen",
    "Time for intimacy and touch",
    "A spontaneous, joyful moment together",
    "A partner in the daily grind",
    "Emotional", "Physical", "Affability", "Partnership"
  ],
  [
    "Which intimacy area needs to grow?",
    "Better spiritual connection",
    "More sexual attention and passion",
    "Deeper emotional bonding",
    "More help with responsibilities",
    "Spiritual", "Sexual", "Emotional", "Partnership"
  ],
  [
    "What do you think sustains long-term love?",
    "Faith and shared purpose",
    "Mutual respect, honesty, and loyalty",
    "Ongoing laughter and shared joy",
    "Creating and growing together",
    "Spiritual", "Commitment", "Affability", "Creative"
  ],
  [
    "You feel most loved when...",
    "You’re touched or kissed affectionately",
    "Your spouse shows they care through practical help",
    "You share joyful moments with lots of laughter",
    "Your spouse initiates prayer or faith conversations",
    "Physical", "Service", "Affability", "Spiritual"
  ]
];


    const scores = {
      Spiritual: 0, Emotional: 0, Commitment: 0,
      Intellectual: 0, Financial: 0, Partnership: 0,
      Physical: 0, Sexual: 0,
      Recreational: 0, Affability: 0,
      Service: 0, Creative: 0
    };

    const descriptions = {
      Spiritual: "You crave shared spiritual practices like prayer, worship, and faith conversations. This intimacy fuels your sense of purpose together.",
      Emotional: "You desire to feel emotionally seen, safe, and connected—sharing deep feelings without fear of judgment.",
      Commitment: "You find comfort in loyalty, devotion, and knowing your spouse is truly 'all in' no matter the season.",
      Intellectual: "You enjoy deep conversations, shared learning, and a meeting of the minds that keeps you mentally engaged.",
      Financial: "You value financial partnership, security, transparency, and alignment in future goals.",
      Partnership: "You feel loved when your spouse works alongside you and helps manage responsibilities equally.",
      Physical: "You enjoy closeness through hugs, hand-holding, and everyday affection.",
      Sexual: "You connect through sexual expression, passion, and being deeply desired by your spouse.",
      Recreational: "You feel closest when having fun, laughing, or enjoying lighthearted adventures together.",
      Affability: "You need friendliness and joy—companionship, humor, and positive emotional tone.",
      Service: "Acts of kindness and practical support help you feel loved and nurtured.",
      Creative: "You thrive on shared creativity—projects, art, music, or collaborative imagination."
    };

    const quizDiv = document.getElementById("quiz");
    const progressText = document.getElementById("progressText");
    const nextButton = document.getElementById("nextButton");
    const resultSection = document.getElementById("resultSection");

    let currentQuestion = 0;

    questions.forEach((q, i) => {
      const div = document.createElement("div");
      div.classList.add("question");
      if (i === 0) div.classList.add("active");
      div.innerHTML = `
        <p><strong>Q${i + 1}:</strong> ${q[0]}</p>
        <label><input type="radio" name="q${i}" value="a"> A. ${q[1]}</label>
        <label><input type="radio" name="q${i}" value="b"> B. ${q[2]}</label>
        <label><input type="radio" name="q${i}" value="c"> C. ${q[3]}</label>
        <label><input type="radio" name="q${i}" value="d"> D. ${q[4]}</label>
      `;
      quizDiv.appendChild(div);
    });

    const allQuestions = document.querySelectorAll(".question");

    nextButton.addEventListener("click", () => {
      const currentInputs = allQuestions[currentQuestion].querySelectorAll("input[type=radio]");
      const answered = Array.from(currentInputs).some(input => input.checked);
      if (!answered) {
        alert("Please select an answer.");
        return;
      }

      const selected = document.querySelector(`input[name=q${currentQuestion}]:checked`).value;
      const map = { a: questions[currentQuestion][5], b: questions[currentQuestion][6], c: questions[currentQuestion][7], d: questions[currentQuestion][8] };
      scores[map[selected]]++;

      allQuestions[currentQuestion].classList.remove("active");
      currentQuestion++;

      if (currentQuestion < allQuestions.length) {
        allQuestions[currentQuestion].classList.add("active");
        progressText.textContent = `Question ${currentQuestion + 1} of 24`;
      } else {
        showResults();
      }
    });

    function showResults() {
      document.getElementById("quizForm").style.display = "none";
      progressText.style.display = "none";
      resultSection.style.display = "block";

      const sorted = Object.entries(scores).sort((a, b) => b[1] - a[1]);
      const labels = sorted.map(s => s[0]);
      const data = sorted.map(s => s[1]);

      const ctx = document.getElementById("resultsChart").getContext("2d");
      new Chart(ctx, {
        type: 'bar',
        data: {
          labels,
          datasets: [{
            label: 'Intimacy Preferences',
            data,
            backgroundColor: '#4d9de0'
          }]
        },
        options: {
          scales: {
            y: { beginAtZero: true }
          }
        }
      });

      document.getElementById("resultBreakdown").innerHTML = `
        <div class="result-block"><strong>Top 4 Intimacy Types:</strong> ${labels.slice(0, 4).join(", ")}</div>
        <div class="result-block"><strong>Middle 4:</strong> ${labels.slice(4, 8).join(", ")}</div>
        <div class="result-block"><strong>Bottom 4:</strong> ${labels.slice(-4).join(", ")}</div>
      `;

      const descDiv = document.getElementById("descriptions");
      labels.slice(0, 4).forEach(type => {
        const block = document.createElement("div");
        block.className = "description-block";
        block.innerHTML = `<strong>${type} Intimacy:</strong><br>${descriptions[type]}`;
        descDiv.appendChild(block);
      });

      document.getElementById("scoreSummary").value = `Top 4: ${labels.slice(0, 4).join(", ")} | Middle: ${labels.slice(4, 8).join(", ")} | Bottom: ${labels.slice(-4).join(", ")}`;
    }

    async function downloadPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      doc.setFontSize(18);
      doc.text("Your Intimacy Profile", 20, 20);
      doc.setFontSize(12);

      const summary = document.getElementById("scoreSummary").value;
      doc.text(summary, 20, 40);

      let y = 60;
      Object.keys(descriptions).forEach(type => {
        if (scores[type]) {
          doc.setFont(undefined, 'bold');
          doc.text(`${type} (${scores[type]})`, 20, y);
          doc.setFont(undefined, 'normal');
          doc.text(descriptions[type], 20, y + 6);
          y += 20;
        }
      });

      doc.save("intimacy-results.pdf");
    }
  </script>
</body>
</html>

