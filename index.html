<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Discover Your Top Intimacy Needs</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #FFF9F2;
      color: #1A3C5E;
      padding: 20px;
      max-width: 700px;
      margin: auto;
    }
    h1 {
      text-align: center;
      color: #FF4D4D;
    }
    .question {
      display: none;
    }
    .question.active {
      display: block;
    }
    .progress {
      text-align: right;
      font-size: 14px;
      margin-bottom: 10px;
      color: #888;
    }
    label {
      display: block;
      margin: 10px 0;
      background-color: #F5F5F5;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
    }
    input[type="radio"] {
      margin-right: 8px;
    }
    #nextButton, #submitButton {
      background-color: #4D9DE0;
      color: white;
      border: none;
      padding: 12px 24px;
      font-size: 16px;
      border-radius: 5px;
      cursor: pointer;
      display: block;
      margin: 20px auto;
    }
    #emailPrompt {
      display: none;
      text-align: center;
      margin-top: 30px;
      font-size: 18px;
    }
    #emailForm {
      display: none;
      text-align: center;
      margin-top: 20px;
    }
    #emailForm input[type="email"] {
      padding: 10px;
      width: 80%;
      max-width: 300px;
      font-size: 16px;
      margin-bottom: 12px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <h1>What Are Your Top Intimacy Needs?</h1>
  <form id="quizForm">
    <div id="quiz"></div>
    <button type="button" id="nextButton">Next</button>
  </form>

  <div id="emailPrompt">
    <p><strong>You've completed the quiz!</strong></p>
    <p>Please enter your email below to receive your personalized results.</p>
    <p><em>(Scroll down and complete the form below)</em></p>
  </div>

  <form id="emailForm">
    <input type="email" id="userEmail" name="email" required placeholder="Enter your email">
    <button type="submit" id="submitButton">Submit</button>
  </form>

  <script>
    const questions = [
      ["When do you feel most connected in your relationship?",
        "When we pray or talk about God together", "When we stay up talking about ideas and goals",
        "When we have meaningful physical intimacy", "When we laugh and enjoy fun moments",
        "Spiritual", "Intellectual", "Physical", "Recreational"],
      // ... (all 24 questions omitted for brevity, keep your full list here)
    ];

    const scores = {
      Spiritual: 0, Emotional: 0, Commitment: 0,
      Intellectual: 0, Financial: 0, Partnership: 0,
      Physical: 0, Sexual: 0,
      Recreational: 0, Affability: 0,
      Service: 0, Creative: 0
    };

    const quizDiv = document.getElementById("quiz");
    const nextButton = document.getElementById("nextButton");
    const emailPrompt = document.getElementById("emailPrompt");
    const emailForm = document.getElementById("emailForm");

    let currentQuestion = 0;

    questions.forEach((q, index) => {
      const div = document.createElement("div");
      div.classList.add("question");
      if (index === 0) div.classList.add("active");
      div.innerHTML = `
        <div class="progress">Question ${index + 1} of ${questions.length}</div>
        <p><strong>${q[0]}</strong></p>
        <label><input type="radio" name="q${index}" value="a" required> A. ${q[1]}</label>
        <label><input type="radio" name="q${index}" value="b"> B. ${q[2]}</label>
        <label><input type="radio" name="q${index}" value="c"> C. ${q[3]}</label>
        <label><input type="radio" name="q${index}" value="d"> D. ${q[4]}</label>
      `;
      quizDiv.appendChild(div);
    });

    const allQuestions = document.querySelectorAll(".question");

    nextButton.addEventListener("click", () => {
      const currentInputs = allQuestions[currentQuestion].querySelectorAll("input[type=radio]");
      const answered = Array.from(currentInputs).some(input => input.checked);
      if (!answered) {
        alert("Please select an answer before continuing.");
        return;
      }

      allQuestions[currentQuestion].classList.remove("active");
      currentQuestion++;

      if (currentQuestion < allQuestions.length) {
        allQuestions[currentQuestion].classList.add("active");
      } else {
        nextButton.style.display = "none";
        emailPrompt.style.display = "block";
        emailForm.style.display = "block";
      }
    });

    emailForm.addEventListener("submit", function (e) {
      e.preventDefault();

      questions.forEach((q, index) => {
        const selected = document.querySelector(`input[name=q${index}]:checked`).value;
        const categoryMap = { a: q[5], b: q[6], c: q[7], d: q[8] };
        scores[categoryMap[selected]]++;
      });

      const queryParams = new URLSearchParams();
      for (const key in scores) {
        queryParams.append(key, scores[key]);
      }

      const email = document.getElementById("userEmail").value;
      queryParams.append("email", encodeURIComponent(email));

      window.location.href = `https://www.happymarriagehappylife.com/quiz-results?${queryParams.toString()}`;
    });
  </script>
</body>
</html>

